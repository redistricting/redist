<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Identify Cores of a District (Heuristic) — make_cores • redist</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Identify Cores of a District (Heuristic) — make_cores" />
<meta property="og:description" content="Creates a grouping ID to unite geographies and perform analysis on a smaller
set of precincts. It identifies all precincts more than boundary edges
of a district district boundary. Each contiguous group of precincts more than
boundary steps away from another district gets it own group. Some
districts may have multiple, disconnected components that make up the core,
but each of these is assigned a separate grouping id so that a call to
sf::st_union() would produce only connected pieces." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">redist</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/redist.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/glossary.html">Glossary of Key Redistricting Terms</a>
    </li>
    <li>
      <a href="../articles/map-preproc.html">Map Pre-processing for Special Constraints</a>
    </li>
    <li>
      <a href="../articles/mcmc.html">Redistricting with Flip MCMC</a>
    </li>
    <li>
      <a href="../articles/mpi-slurm.html">MPI / Slurm Sample Scripts</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Releases</li>
    <li>
      <a href="https://alarm-redist.github.io/posts/2021-04-02-redist-300/">redist 3.0</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/alarm-redist/redist/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Identify Cores of a District (Heuristic)</h1>
    <small class="dont-index">Source: <a href='https://github.com/alarm-redist/redist/blob/master/R/tidy.R'><code>R/tidy.R</code></a>, <a href='https://github.com/alarm-redist/redist/blob/master/R/cores.R'><code>R/cores.R</code></a></small>
    <div class="hidden name"><code>redist.identify.cores.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Creates a grouping ID to unite geographies and perform analysis on a smaller
set of precincts. It identifies all precincts more than <code>boundary</code> edges
of a district district boundary. Each contiguous group of precincts more than
<code>boundary</code> steps away from another district gets it own group. Some
districts may have multiple, disconnected components that make up the core,
but each of these is assigned a separate grouping id so that a call to
<code><a href='https://r-spatial.github.io/sf/reference/geos_combine.html'>sf::st_union()</a></code> would produce only connected pieces.</p>
    </div>

    <pre class="usage"><span class='fu'>make_cores</span><span class='op'>(</span>.data <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/exists.html'>get0</a></span><span class='op'>(</span><span class='st'>"."</span>, <span class='fu'><a href='https://rdrr.io/r/base/sys.parent.html'>parent.frame</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>, boundary <span class='op'>=</span> <span class='fl'>1</span>, focus <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='fu'>redist.identify.cores</span><span class='op'>(</span><span class='va'>adj</span>, <span class='va'>plan</span>, boundary <span class='op'>=</span> <span class='fl'>1</span>, focus <span class='op'>=</span> <span class='cn'>NULL</span>, simplify <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.data</th>
      <td><p>a <code><a href='redist_map.html'>redist_map</a></code> object</p></td>
    </tr>
    <tr>
      <th>boundary</th>
      <td><p>Number of steps to check for. Defaults to 1.</p></td>
    </tr>
    <tr>
      <th>focus</th>
      <td><p>Optional. Integer. A single district to focus on.</p></td>
    </tr>
    <tr>
      <th>adj</th>
      <td><p>zero indexed adjacency list.</p></td>
    </tr>
    <tr>
      <th>plan</th>
      <td><p>An integer vector or matrix column of district assignments.</p></td>
    </tr>
    <tr>
      <th>simplify</th>
      <td><p>Optional. Logical. Whether to return extra information or just grouping ID.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>integer vector (if simplify is false). Otherwise it returns a tibble with the grouping
variable as <code>group_id</code> and additional information on connected components.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This is a loose interpretation of the
<a href='https://www.ncsl.org/research/redistricting/redistricting-criteria.aspx'>NCSL's summary</a>
of redistricting criteria to preserve the cores of prior districts. Using the
adjacency graph for a given plan, it will locate the precincts on the
boundary of the district, within <code>boundary</code> steps of the edge. Each of
these  is given their own group. Each remaining entry that is not near the
boundary of the district is given an id that can be used to group the
remainder of the district by connected component. This portion is deemed the
core of the district.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>[redist.plot.cores()] for a plotting function</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>fl250</span><span class='op'>)</span>
<span class='va'>adj</span> <span class='op'>&lt;-</span> <span class='fu'><a href='redist.adjacency.html'>redist.adjacency</a></span><span class='op'>(</span><span class='va'>fl250</span><span class='op'>)</span>
<span class='va'>plan</span> <span class='op'>&lt;-</span> <span class='fu'><a href='redist_smc.html'>redist.smc</a></span><span class='op'>(</span>adj <span class='op'>=</span> <span class='va'>adj</span>, total_pop <span class='op'>=</span> <span class='va'>fl250</span><span class='op'>$</span><span class='va'>pop</span>,
                  nsims <span class='op'>=</span> <span class='fl'>1</span>, ndists <span class='op'>=</span> <span class='fl'>4</span><span class='op'>)</span><span class='op'>$</span><span class='va'>plans</span>
</div><div class='output co'>#&gt; SEQUENTIAL MONTE CARLO
#&gt; Sampling 1 250-unit maps with 4 districts and population between 194829 and 198764.
#&gt; Making split 1 of 3
#&gt; Note: maximum hit; falling back to naive k estimator.
#&gt; Using k = 1
#&gt; 20.0% acceptance rate.
#&gt; Resampling effective sample size: 1.0 (100.0% efficiency).
#&gt; Making split 2 of 3
#&gt; Using k = 1
#&gt; 11.1% acceptance rate.
#&gt; Resampling effective sample size: 1.0 (100.0% efficiency).
#&gt; Making split 3 of 3
#&gt; Note: maximum hit; falling back to naive k estimator.
#&gt; Using k = 1
#&gt; 14.3% acceptance rate.
#&gt; Resampling effective sample size: 1.0 (100.0% efficiency).</div><div class='input'><span class='va'>core</span> <span class='op'>&lt;-</span> <span class='fu'>redist.identify.cores</span><span class='op'>(</span>adj <span class='op'>=</span> <span class='va'>adj</span>, plan <span class='op'>=</span> <span class='va'>plan</span><span class='op'>)</span>
<span class='fu'><a href='redist.plot.cores.html'>redist.plot.cores</a></span><span class='op'>(</span>shp <span class='op'>=</span> <span class='va'>fl250</span>, plan <span class='op'>=</span> <span class='va'>plan</span>, core <span class='op'>=</span> <span class='va'>core</span><span class='op'>)</span>
</div><div class='img'><img src='redist.identify.cores-1.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Christopher T. Kenny, Cory McCartan, Ben Fifield, Kosuke Imai.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


